{"ast":null,"code":"import _defineProperty from \"/Users/hotpotman/minialipay-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/hotpotman/minialipay-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/hotpotman/minialipay-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/hotpotman/minialipay-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/hotpotman/minialipay-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/hotpotman/minialipay-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/hotpotman/minialipay-frontend/src/pages/basePage.js\";\nimport React, { Component } from 'react';\nimport { NavBar, Icon } from \"antd-mobile\";\nimport classNames from 'classnames';\nimport styles from \"./basePage.module.scss\";\nvar animationLength = 350;\nexport var BasePage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(BasePage, _Component);\n\n  function BasePage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, BasePage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(BasePage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      phase: 0\n    };\n    return _this;\n  }\n\n  _createClass(BasePage, [{\n    key: \"modalDidMount\",\n    value: function modalDidMount() {\n      var _this2 = this;\n\n      if (this.state.phase === 0) {\n        window.requestAnimationFrame(function () {\n          setTimeout(function () {\n            _this2.setState({\n              phase: 1\n            });\n          });\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this,\n          _classNames;\n\n      return React.createElement(\"div\", {\n        ref: function ref(_ref) {\n          if (_ref) {\n            _this3.modalDidMount(_ref);\n          }\n        },\n        className: classNames((_classNames = {\n          \"page-root\": true\n        }, _defineProperty(_classNames, styles.root, true), _defineProperty(_classNames, styles.fadeInStart, this.state.phase === 0), _defineProperty(_classNames, styles.fadeOutStart, this.state.phase === 2), _classNames)),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }]);\n\n  return BasePage;\n}(Component);\nexport default function createPage(jsx) {\n  var _this4 = this;\n\n  var fadeOut;\n\n  var refCallback = function refCallback(ref) {\n    if (ref) {\n      fadeOut = function fadeOut() {\n        return new Promise(function (resolve) {\n          ref.setState({\n            phase: 2\n          }, function () {\n            setTimeout(function () {\n              resolve();\n            }, animationLength);\n          });\n        });\n      };\n    }\n  };\n\n  this.close = function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    if (!args.length) {\n      _this4.props.close(null, animationLength);\n    } else {\n      var _this4$props;\n\n      (_this4$props = _this4.props).close.apply(_this4$props, args.concat([animationLength]));\n    }\n\n    fadeOut();\n  }; // 仅供 NavBar / overrideNavBar 使用，不得 Override\n\n\n  this.onLeftClick = function () {\n    return (_this4.onBackClick || function () {\n      return _this4.close(null);\n    })();\n  };\n\n  return React.createElement(BasePage, {\n    ref: refCallback,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, this.props.overrideNavBar ? this.props.overrideNavBar(this) : React.createElement(NavBar, {\n    mode: this.navbarMode || \"light\",\n    icon: React.createElement(Icon, {\n      type: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }),\n    onLeftClick: this.onLeftClick,\n    className: this.props.navBarClass || \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, this.pageTitle), jsx);\n}","map":{"version":3,"sources":["/Users/hotpotman/minialipay-frontend/src/pages/basePage.js"],"names":["React","Component","NavBar","Icon","classNames","styles","animationLength","BasePage","state","phase","window","requestAnimationFrame","setTimeout","setState","ref","modalDidMount","root","fadeInStart","fadeOutStart","props","children","createPage","jsx","fadeOut","refCallback","Promise","resolve","close","args","length","onLeftClick","onBackClick","overrideNavBar","navbarMode","navBarClass","pageTitle"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { NavBar, Icon } from \"antd-mobile\";\nimport classNames from 'classnames'\nimport styles from \"./basePage.module.scss\";\n\nconst animationLength = 350;\n\nexport class BasePage extends Component {\n\n  state = {\n    phase: 0\n  };\n\n  modalDidMount() {\n    if (this.state.phase === 0) {\n      window.requestAnimationFrame(() => {\n        setTimeout(() => {\n          this.setState({\n            phase: 1\n          });\n        });\n      });\n    }\n  }\n\n  render() {\n    return <div\n      ref={(ref) => {\n        if (ref) {\n          this.modalDidMount(ref);\n        }\n      }}\n      className={classNames({\n        \"page-root\": true,\n        [styles.root]: true,\n        [styles.fadeInStart]: this.state.phase === 0,\n        [styles.fadeOutStart]: this.state.phase === 2,\n      })}\n    >\n\n      {this.props.children}\n    </div>;\n  }\n\n}\n\nexport default function createPage(jsx) {\n  let fadeOut;\n\n  let refCallback = (ref) => {\n    if (ref) {\n      fadeOut = () => {\n        return new Promise(function (resolve) {\n          ref.setState({\n            phase: 2\n          }, () => {\n            setTimeout(() => {\n              resolve();\n            }, animationLength);\n          });\n        });\n      };\n    }\n  };\n\n  this.close = (...args) => {\n    if (!args.length) {\n      this.props.close(null, animationLength);\n    } else {\n      this.props.close(...args, animationLength);\n    }\n    fadeOut();\n  };\n\n  // 仅供 NavBar / overrideNavBar 使用，不得 Override\n  this.onLeftClick = () => {\n    return (this.onBackClick || (() => this.close(null)))();\n  };\n\n  return <BasePage ref={refCallback}>\n    {this.props.overrideNavBar ? this.props.overrideNavBar(this) : <NavBar\n      mode={this.navbarMode || \"light\"}\n      icon={<Icon type=\"left\"/>}\n      onLeftClick={this.onLeftClick}\n      className={this.props.navBarClass || \"\"}\n    >\n      {this.pageTitle}\n    </NavBar>}\n\n    {jsx}\n\n  </BasePage>\n}"]},"metadata":{},"sourceType":"module"}