{"ast":null,"code":"import _defineProperty from \"/Users/hotpotman/Desktop/minialipay/minialipay-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/hotpotman/Desktop/minialipay/minialipay-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/hotpotman/Desktop/minialipay/minialipay-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/hotpotman/Desktop/minialipay/minialipay-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/hotpotman/Desktop/minialipay/minialipay-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/hotpotman/Desktop/minialipay/minialipay-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/hotpotman/Desktop/minialipay/minialipay-frontend/src/component/common/LoadingIndicator.js\";\nimport Spinner from 'react-spinkit';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport styles from './LoadingIndicator.module.scss';\nimport classNames from 'classnames';\nvar animationLength = 250;\nvar MASKED_DIV_CLASS_NAME = \"masked-div\";\nexport var LoadingIndicator =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(LoadingIndicator, _React$Component);\n\n  function LoadingIndicator() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, LoadingIndicator);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LoadingIndicator)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      phase: 0\n    };\n    return _this;\n  }\n\n  _createClass(LoadingIndicator, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (this.state.phase === 0) {\n        window.requestAnimationFrame(function () {\n          setTimeout(function () {\n            _this2.setState({\n              phase: 1\n            });\n          });\n        });\n      }\n    }\n  }, {\n    key: \"fadeOut\",\n    value: function fadeOut() {\n      this.setState({\n        phase: 2\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _classNames;\n\n      return React.createElement(\"div\", {\n        className: classNames((_classNames = {}, _defineProperty(_classNames, styles.loadingIndicatorWrapper, true), _defineProperty(_classNames, styles.fadeInStart, this.state.phase === 0), _defineProperty(_classNames, styles.fadeOutStart, this.state.phase === 2), _classNames)),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32\n        },\n        __self: this\n      }, React.createElement(Spinner, {\n        name: \"folding-cube\",\n        color: \"#40a9ff\",\n        fadeIn: \"none\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"hint-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38\n        },\n        __self: this\n      }, \"\\u8F7D\\u5165\\u4E2D\\u2026\"));\n    }\n  }]);\n\n  return LoadingIndicator;\n}(React.Component);\nexport function showLoadingIndicator(showWithMask) {\n  var divRef = document.createElement(\"div\");\n  var reactRef = null;\n  document.body.appendChild(divRef);\n  ReactDOM.render(React.createElement(LoadingIndicator, {\n    ref: function ref(_ref) {\n      if (_ref) {\n        reactRef = _ref;\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }), divRef);\n\n  if (showWithMask) {\n    var children = document.body.children;\n\n    for (var i = 0; i < children.length; i++) {\n      var child = children[i];\n\n      if (child !== divRef) {\n        if (child.tagName === \"DIV\" && child.className.indexOf(MASKED_DIV_CLASS_NAME) < 0) {\n          child.className = child.className + \" \" + MASKED_DIV_CLASS_NAME;\n        }\n      }\n    }\n  }\n\n  return function hideLoadingIndicator() {\n    reactRef.fadeOut();\n    setTimeout(function () {\n      ReactDOM.unmountComponentAtNode(divRef);\n      document.body.removeChild(divRef);\n\n      if (showWithMask) {\n        var _children = document.body.children;\n\n        for (var _i = 0; _i < _children.length; _i++) {\n          var _child = _children[_i];\n\n          if (_child !== divRef) {\n            if (_child.tagName === \"DIV\" && _child.className.indexOf(MASKED_DIV_CLASS_NAME) >= 0) {\n              _child.className = _child.className.split(MASKED_DIV_CLASS_NAME).join(\"\");\n            }\n          }\n        }\n      }\n    }, animationLength);\n  };\n}","map":{"version":3,"sources":["/Users/hotpotman/Desktop/minialipay/minialipay-frontend/src/component/common/LoadingIndicator.js"],"names":["Spinner","React","ReactDOM","styles","classNames","animationLength","MASKED_DIV_CLASS_NAME","LoadingIndicator","state","phase","window","requestAnimationFrame","setTimeout","setState","loadingIndicatorWrapper","fadeInStart","fadeOutStart","Component","showLoadingIndicator","showWithMask","divRef","document","createElement","reactRef","body","appendChild","render","ref","children","i","length","child","tagName","className","indexOf","hideLoadingIndicator","fadeOut","unmountComponentAtNode","removeChild","split","join"],"mappings":"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","sourcesContent":["import Spinner from 'react-spinkit';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport styles from './LoadingIndicator.module.scss';\nimport classNames from 'classnames'\n\nconst animationLength = 250;\nconst MASKED_DIV_CLASS_NAME = \"masked-div\";\n\nexport class LoadingIndicator extends React.Component {\n  state = {\n    phase: 0\n  };\n\n  componentDidMount() {\n    if (this.state.phase === 0) {\n      window.requestAnimationFrame(() => {\n        setTimeout(() => {\n          this.setState({\n            phase: 1\n          });\n        });\n      });\n    }\n  }\n\n  fadeOut() {\n    this.setState({phase: 2});\n  }\n\n  render() {\n    return <div className={classNames({\n      [styles.loadingIndicatorWrapper]: true,\n      [styles.fadeInStart]: this.state.phase === 0,\n      [styles.fadeOutStart]: this.state.phase === 2,\n    })}>\n      <Spinner name='folding-cube' color=\"#40a9ff\" fadeIn=\"none\"/>\n      <div className=\"hint-text\">\n        载入中…\n      </div>\n    </div>;\n  }\n}\n\nexport function showLoadingIndicator(showWithMask) {\n  let divRef = document.createElement(\"div\");\n  let reactRef = null;\n  document.body.appendChild(divRef);\n\n  ReactDOM.render(<LoadingIndicator ref={(ref) => {\n    if (ref) {\n      reactRef = ref;\n    }\n  }}/>, divRef);\n\n  if (showWithMask) {\n    let children = document.body.children;\n    for (let i = 0; i < children.length; i++) {\n      let child = children[i];\n      if (child !== divRef) {\n        if (child.tagName === \"DIV\" && child.className.indexOf(MASKED_DIV_CLASS_NAME) < 0) {\n          child.className = child.className + \" \" + MASKED_DIV_CLASS_NAME;\n        }\n      }\n    }\n  }\n\n  return function hideLoadingIndicator() {\n    reactRef.fadeOut();\n    setTimeout(() => {\n      ReactDOM.unmountComponentAtNode(divRef);\n      document.body.removeChild(divRef);\n      if (showWithMask) {\n        let children = document.body.children;\n        for (let i = 0; i < children.length; i++) {\n          let child = children[i];\n          if (child !== divRef) {\n            if (child.tagName === \"DIV\" && child.className.indexOf(MASKED_DIV_CLASS_NAME) >= 0) {\n              child.className = child.className.split(MASKED_DIV_CLASS_NAME).join(\"\");\n            }\n          }\n        }\n      }\n    }, animationLength);\n  };\n}\n\n"]},"metadata":{},"sourceType":"module"}